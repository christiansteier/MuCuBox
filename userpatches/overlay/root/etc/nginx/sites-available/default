server {
        listen 80 default_server;
        listen [::]:80 default_server;

        root /var/www/rompr;
        index index.php index.html index.htm;

        server_name musicbox.local;
        
        gzip on;
        gzip_min_length 10240;
        gzip_proxied expired no-cache no-store private auth;
        gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/json application/xml;
        gzip_disable msie6;

        location / {
                allow all;
                index index.php;
                location ~ \.php {
                        try_files $uri index.php =404;
                        fastcgi_pass unix:/var/run/php/php7.0-fpm.sock;
                        fastcgi_index index.php;
                        fastcgi_param SCRIPT_FILENAME $request_filename;
                        include /etc/nginx/fastcgi_params;
                        fastcgi_read_timeout 1800;
                }
                error_page 404 = /404.php;
                try_files $uri $uri/ =404;
                location ~ /albumart/* {
                        expires -1s;
                }
        }
}

